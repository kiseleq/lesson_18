(()=>{"use strict";const e=new class{constructor(){this.errorMessage="Что-то пошло не так...",this.loadMessage="Загрузка...",this.successMessage="Спасибо! Мы скоро с вами свяжемся!",this.forms=document.querySelectorAll("form")}postData(e,t){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}sendAjax(){const e=document.createElement("div");e.classList.add("delete"),e.style.cssText="\n              font-size: 2rem;\n              color: #fff;\n      ",this.forms.forEach((t=>{t.addEventListener("submit",(o=>{if(setTimeout((()=>{document.querySelector(".delete").remove()}),5e3),o.preventDefault(),""===t.value.trim())return void alert("Введите данные в поле(я) ввода");t.appendChild(e),e.textContent=this.loadMessage;const s=new FormData(t);let a={};s.forEach(((e,t)=>{a[t]=e})),this.postData(t,a).then((t=>{if(200!==t.status)throw new Error("status network not 200");e.textContent=this.successMessage,4===t.readyState&&(e.textContent=this.successMessage,e.textContent=this.successMessage)})).catch((t=>{e.textContent=this.errorMessage,console.error(t)})),t.reset()}))}))}};((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),s=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("change",(t=>{const n=t.target;(n.matches(".calc-type")||n.matches(".calc-square")||n.matches(".calc-day")||n.matches(".calc-count"))&&(()=>{let t=0,n=1,l=1;const u=o.options[o.selectedIndex].value,i=+s.value;c.value>1&&(n+=(c.value-1)/10),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),u&&i&&(t=Math.floor(e*u*i*n*l)),r.textContent=t})()}))})(),(()=>{const e=document.getElementById("calc"),t=document.querySelector(".main-form"),o=document.querySelector(".popup"),s=document.querySelector(".connect");e.addEventListener("input",(e=>{const t=e.target;t.matches("input")&&(t.value=t.value.replace(/\D/,""))}));const a=e=>{const t=e.target;let o=[];t.closest(".form-name")?(t.value=t.value.replace(/[\-]+/,"-"),t.value.split(/[\s,\-]+/).forEach((e=>{o.push(e[0].toUpperCase()+e.substring(1).toLowerCase())})),o=o.join(" "),t.value=o):t.closest("form-email")&&t.value.trim()};s.addEventListener("input",(e=>{const t=e.target;t.closest("#form2-name")?t.value=t.value.replace(/[^а-яА-Я ]/,""):t.closest("#form2-email")?(t.value=t.value.replace(/ +/,""),t.value=t.value.replace(/[^a-zA-Z\@\_\-\~\.\!\* ]/,"")):t.closest("#form2-phone")?t.value=t.value.replace(/[^1-9\+{1}]/,""):t.closest("#form2-message")&&(t.value=t.value.replace(/[^а-яА-Я1-9\,\.\?\! ]/,""))})),s.addEventListener("focusout",(e=>{const t=e.target;let o=[];t.closest("#form-name")?(t.value=t.value.replace(/[\-]+/,"-"),t.value.split(/[\s,\-]+/).forEach((e=>{o.push(e[0].toUpperCase()+e.substring(1).toLowerCase())})),o=o.join(" "),t.value=o):t.closest("#form-email")&&t.value.trim()})),t.addEventListener("input",(e=>{const t=e.target;if(t===t.closest(".form-name"))t.value=t.value.replace(/[^а-яА-Я ]/,"");else if(t===t.closest(".form-email"))t.value=t.value.replace(/ +/,""),t.value=t.value.replace(/[^a-zA-Z\@\_\-\~\.\!\*]/,"");else{if(t!==t.closest(".form-phone"))return;t.value=t.value.replace(/[^1-9\+{1}]/,"")}})),t.addEventListener("focusout",a),o.addEventListener("input",(e=>{const t=e.target;if(t===t.closest(".form-name"))t.value=t.value.replace(/[^а-яА-Я ]/,"");else if(t===t.closest(".form-email"))t.value=t.value.replace(/ +/,""),t.value=t.value.replace(/[^a-zA-Z\@\_\-\~\.\!\*]/,"");else{if(t!==t.closest(".form-phone"))return;t.value=t.value.replace(/[^1-9\+]/,"")}})),o.addEventListener("focusout",a)})(),document.querySelector(".command"),document.querySelectorAll(".command__photo").forEach(((e,t)=>{e.addEventListener("mouseenter",(()=>{e.src=e.dataset.dataImg,e.src="images/command/command-"+(t+1)+"a.jpg"})),e.addEventListener("mouseleave",(()=>{e.src=e.dataset.dataImgg,e.src="images/command/command-"+(t+1)+".jpg"}))})),function(e){let t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),s=document.querySelector("#timer-seconds");setInterval((function(){let a=function(){let t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),s=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60),minutes:s,seconds:o}}();a.timeRemaining>0?(a.hours<10?(a.hours=String(a.hours),a.hours="0"+a.hours,t.textContent=a.hours):t.textContent=a.hours,a.minutes<10?(a.minutes=String(a.minutes),a.minutes="0"+a.minutes,o.textContent=a.minutes):o.textContent=a.minutes,a.seconds<10?(a.seconds=String(a.seconds),a.seconds="0"+a.seconds,s.textContent=a.seconds):s.textContent=a.seconds):(t.textContent="00",o.textContent="00",s.textContent="00")}),0)}("17 april 2021"),(()=>{const e=document.querySelector(".menu"),t=document.querySelector("menu"),o=t.querySelector(".close-btn"),s=t.querySelectorAll("li"),a=()=>{t.classList.toggle("active-menu")};t.addEventListener("click",(e=>{let t=e.target;t===o&&a(),s.forEach(((e,o)=>{e===t.closest("li")&&a()}))})),e.addEventListener("click",a)})(),(()=>{const e=document.querySelector(".popup"),t=e.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn");e.querySelector(".popup-close");let s=0;const a=()=>{const e=requestAnimationFrame(a);s++,s<25?t.style.top=5*s+"px":(s=0,cancelAnimationFrame(e))};o.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",screen.width>768&&a()}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let s=e.target;s=s.closest(".service-header-tab"),s&&t.forEach(((e,a)=>{e===s&&(e=>{for(let s=0;s<o.length;s++)e===s?(t[s].classList.add("active"),o[s].classList.remove("d-none")):(t[s].classList.remove("active"),o[s].classList.add("d-none"))})(a)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots");let o=0;e.forEach((()=>{o++})),(()=>{for(let e=0;e<o;e++)t.insertAdjacentHTML("afterbegin",'<li class = "dot"></li>'),t.querySelector("li")})()})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelectorAll(".dot")),o=document.querySelector("#all-progects");t[0].classList.add("dot-active");let s=0,a=0;const c=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},n=()=>{c(e,s,"portfolio-item-active"),c(t,s,"dot-active"),s++,s>=e.length&&(s=0),r(e,s,"portfolio-item-active"),r(t,s,"dot-active")},l=(e=3e3)=>{a=setInterval(n,e)};o.addEventListener("click",(o=>{o.preventDefault();let a=o.target;a.matches(".portfolio-btn, .dot")&&(c(e,s,"portfolio-item-active"),c(t,s,"dot-active"),a.matches("#arrow-right")?s++:a.matches("#arrow-left")?s--:a.matches(".dot")&&t.forEach(((e,t)=>{e===a&&(s=t)})),s>=e.length&&(s=0),s<0&&(s=e.length-1),r(e,s,"portfolio-item-active"),r(t,s,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&l()})),l(1500)})(),e.sendAjax()})();